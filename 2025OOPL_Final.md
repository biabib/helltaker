# 2025 OOPL Final Report

## 組別資訊

組別：34
組員：111590027 陳睿泰、111590029 林柏儒
復刻遊戲：Helltaker

## 專案簡介

### 遊戲簡介

你在某天醒來，懷抱著一個狂野的夢想——建立一個充滿惡魔美少女的後宮。
你打開了通往地獄的傳送門，只為實現你最放肆的慾望。

然而迎接你的，是灼燒肺腑的煉獄烈焰、步步殺機的死亡陷阱，還有一切看起來都像可愛手遊風的地獄世界。

歡迎來到地獄。你的夢想，就從這裡開始。

### 組別分工

111590027 陳睿泰：邊界生成、碰撞判定、地圖存儲與生成、蒐集素材

111590029 林柏儒：角色及物件的製作與判定實作、關卡系統製作、渲染與動畫、蒐集素材

## 遊戲介紹

### 遊戲規則

《Helltaker》是一款推箱子遊戲，你將扮演一位為了建立惡魔後宮而親自踏入地獄的男子漢。

目標很簡單：通過無數的關卡，攻略惡魔少女。

過程中需要透過WASD進行角色操作，移動方塊、閃躲陷阱、開啟寶箱，每一步都要算好步數。

前15關沒有步數限制，讓玩家體驗遊玩方式，之後會加上步數限制，走錯一步就得重新來過。

如果遇到無法通關的關卡，可以透過按下 N 或 R 鍵進行跳關或關卡重製。

### 遊戲畫面
![](screenshot\screenshot(1).png)

![](screenshot\screenshot(2).png)

![](screenshot\screenshot(3).png)

## 程式設計

### 程式架構

![](screenshot\screenshot(4).png)

![](screenshot\screenshot(5).png)

![](screenshot\screenshot(6).png)

### 程式技術

整項專案涵蓋了許多技術應用，以進行遊戲的復刻與設計，以下會將幾點比較重要的技術進行介紹：

1.地圖初始化

將遊戲設計為16x9的固定大小視窗，透過MapStorage將地圖網格化切割微陣列存儲，加上AppStart的LoadMapFromData以讀取檔案來進行渲染並生成地圖物件，我們的Reset也是運用到了這項技術，透過"R"觸發地圖物件的清空，重新讀取、渲染並生成該關卡。

2.物件之間的判定

在AppUpdate中，我們設計了多個函式，其中設計了TryMoveHero和TryUnlockLockedBlockAt函式來進行各個物件彼此之間的判定，裡面包含IsBoxAtPosition、IsEnemyAtPosition、IsGoalAtPosition、IsLockedBlockAt等函式進行各物件的定位，以及IsWalkable來判定主角下一步是否為障礙物，此外，還包含了各物件的運作判定，例如：推動箱子與敵人、觸發尖刺而減少步數、透過鑰匙解鎖上鎖的方塊等。

## 結語

(抱歉，這是一坨爛code)

### 問題與解決方法

1.地圖邊界判定

我們原本一開始是將地圖以像素100px*100px為單位對視窗進行切割，但這樣會導致物件的判定和圖片出現問題，後來將地圖網格化進行切割，以格數計算，就解決了許多問題。

2.地圖渲染

我們一開始圖片一直顯示不出來，後來發現是參數宣告的問題，這也讓我們對後續參數的檢查格外嚴謹。

3.text文字顯示

最開始無法以讀取參數的方式進行顯示，發現是參數型態轉換導致問題的產生，後來我們從頭將其修改，問題也就解決了。

### 自評

| 項次 | 項目                   | 完成 |
|------|------------------------|-------|
| 1    | 完成協議書上所描述的最小關卡數量  |  V  |
| 2    | 完成專案權限改為 public |  V  |
| 3    | 具有 debug mode 的功能  |  V  |
| 4    | 解決專案上所有 Memory Leak 的問題  |  V  |
| 5    | 報告中沒有任何錯字，以及沒有任何一項遺漏  |  V  |
| 6    | 報告至少保持基本的美感，人類可讀  |  V  |
| 7    | 事先提醒助教這是坨爛code  |  V  |

### 心得

111590027 陳睿泰 

這是我第一次跟別人合作共同參與遊戲的製作，整體而言感到挺新奇的，之後也會期待透過Unity或Unreal Engine去進行遊戲的實作，不過在此次專案中我負責的部分相對之下較少，但也從中學到了很多，感謝隊友。

111590029 林柏儒

這次下來終於大致完成了一款遊戲，雖然說沒有將動畫特效及音效的部分完全做好，也沒將故事文本置入遊戲，但整體遊戲內容機制至少有呈現出來，對於能夠正常運作感到十分慶幸，但也很抱歉這是坨爛code。

### 貢獻比例

111590027 陳睿泰 40%
111590029 林柏儒 60%